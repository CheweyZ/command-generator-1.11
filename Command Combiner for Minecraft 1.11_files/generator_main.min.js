function optionHopperClockChange(){$("#option-hopper-clock").is(":checked")?useHopperClock=!0:useHopperClock=!1}function nbtInSelectors(e){var o=/@[eapr]\[.*nbt=\{(.*?)\}.*\]/g;if(o.test(e)){scoreboardObjInUse[1]=!0;var a=e.split(/ (@[eapr])\[/g)[1],t=inputScoreboard+"_N",s=e.split(o)[1],l=!1,m=0;for(n=0;n<nbtScoreArr.length;n++)nbtScoreArr[n].nbtstr==s&&(l=!0,m=nbtScoreArr[n].score);l||(nbtScoreArr[nbtScoreArr.length]={nbtstr:s,score:nbtSelectorCur},m=nbtSelectorCur),allCommands.splice(i,0,{cmd:"scoreboard players set "+a+" "+t+" "+m+" {"+s+"}",tag:"none"}),allCommands[allCommands.length]={cmd:"scoreboard players reset @e "+t,tag:"none"},i++,allCommands[i].cmd=allCommands[i].cmd.replace(/,nbt=\{.*?\},/g,",score_"+t+"_min="+m+",score_"+t+"="+m+","),allCommands[i].cmd=allCommands[i].cmd.replace(/,nbt=\{.*?\}/g,",score_"+t+"_min="+m+",score_"+t+"="+m),allCommands[i].cmd=allCommands[i].cmd.replace(/nbt=\{.*?\},/g,"score_"+t+"_min="+m+",score_"+t+"="+m+","),allCommands[i].cmd=allCommands[i].cmd.replace(/nbt=\{.*?\}/g,"score_"+t+"_min="+m+",score_"+t+"="+m),l||nbtSelectorCur++}}function loadProject(e){var n=JSON.parse(e);for($("#structure-orientation-input").val(n.settings.orientation),$("#option-box-offset-x").val(n.settings.offset[0]),$("#option-box-offset-y").val(n.settings.offset[1]),$("#option-box-offset-z").val(n.settings.offset[2]),$("#option-box-length-x").val(n.settings.dimensions[0]),$("#option-box-length-z").val(n.settings.dimensions[1]),$("#option-box-encase").prop("checked",n.settings.casing.enabled),$("#option-box-encase-block-caps").val(n.settings.casing.caps),$("#option-box-encase-block-window").val(n.settings.casing.sides),$("#option-advanced-objectivename").val(n.settings.scoreboard),n.settings.hopper&&$("#option-hopper-clock").prop("checked",!1).click(),n.settings.svrsigns&&$("#option-server-signs").prop("checked",!1).click(),$(".sign-item").remove(),j=0;j<n.settings.signs.length;j++)addSign();$(".sign-item").each(function(e,o){$(o).children(".sign-input-line").each(function(o,a){$(a).val(n.settings.signs[e][o].txt)}),$(o).children(".sign-input-color").each(function(o,a){$(a).val(n.settings.signs[e][o].clr)}),$(o).children(".sign-input-cmd").each(function(o,a){$(a).val(n.settings.signs[e][o].command)}),$(o).children(".sign-input-style-bold").each(function(o,a){$(a).prop("checked",n.settings.signs[e][o].bold)}),$(o).children(".sign-input-style-italics").each(function(o,a){$(a).prop("checked",n.settings.signs[e][o].italics)}),$(o).children(".sign-input-style-bold").each(function(o,a){$(a).prop("checked",n.settings.signs[e][o].underline)}),$(o).children(".sign-input-destroy").each(function(o,a){n.settings.signs[e][0].destroy&&$(a).trigger("click")}),$(o).children(".sign-input-activatetoggle").each(function(o,a){n.settings.signs[e][0].tog&&$(a).trigger("click")})}),$("#input-commands").val(n.cmds)}function generateExportString(){var e=$("#input-commands").val(),n={orientation:$("#structure-orientation-input").val(),offset:[$("#option-box-offset-x").val(),$("#option-box-offset-y").val(),$("#option-box-offset-z").val()],dimensions:[$("#option-box-length-x").val(),$("#option-box-length-z").val()],casing:{enabled:$("#option-box-encase").is(":checked"),caps:$("#option-box-encase-block-caps").val(),sides:$("#option-box-encase-block-window").val()},scoreboard:$("#option-advanced-objectivename").val(),signs:[],hopper:$("#option-hopper-clock").is(":checked"),svrsigns:$("#option-server-signs").is(":checked")};$(".sign-item").each(function(e,o){n.signs[n.signs.length]=[];var a={lines:[],bold:[],italics:[],underline:[],txtcolor:[],command:[],destroy:!1,tog:!1};for($(o).children(".sign-input-line").each(function(e,n){a.lines[a.lines.length]=$(n).val()}),$(o).children(".sign-input-cmd").each(function(e,n){a.command[a.command.length]=$(n).val()}),$(o).children(".sign-input-style-italics").each(function(e,n){a.italics[a.italics.length]=$(n).is(":checked")}),$(o).children(".sign-input-style-bold").each(function(e,n){a.bold[a.bold.length]=$(n).is(":checked")}),$(o).children(".sign-input-style-underline").each(function(e,n){a.underline[a.underline.length]=$(n).is(":checked")}),$(o).children(".sign-input-color").each(function(e,n){a.txtcolor[a.txtcolor.length]=$(n).val()}),$(this).children(".sign-input-destroy").is(":checked")&&(a.destroy=!0),$(this).children(".sign-input-activatetoggle").is(":checked")&&(a.tog=!0),i=0;i<a.lines.length;i++)n.signs[n.signs.length-1][n.signs[n.signs.length-1].length]={txt:a.lines[i],clr:a.txtcolor[i],bold:a.bold[i],italics:a.italics[i],underline:a.underline[i],command:a.command[i]},n.signs[n.signs.length-1][0].destroy=a.destroy,n.signs[n.signs.length-1][0].tog=a.tog});var o=0;$(".output-command").each(function(){o+=$(this).val().length});var a={cmds:e,settings:n,len:o};return console.log("read below:"),console.log(a),JSON.stringify(a)}function predictCommandLength(){var e=$("#output-command").val();generateCompactCommand();var n=0;return $(".output-command").each(function(){n+=$(this).val().length}),$("#output-command").val(e),n}function generateCompactCommand(){var e=parseInt($("#option-box-offset-x").val()),n=parseInt($("#option-box-offset-y").val()),o=parseInt($("#option-box-offset-z").val());boxLengthX=parseInt($("#option-box-length-x").val()),boxLengthZ=parseInt($("#option-box-length-z").val()),3==parseInt($("#structure-orientation-input").val())&&e++,fetchCommands(),getBoxDimensionInputs(),generateCoordinates(boxLengthX,boxLengthZ),offsetCoordinates(e,n,o,parseInt($("#structure-orientation-input").val())),formatEscaping(),generateCasing($("#option-box-encase-block-window").val(),$("#option-box-encase-block-caps").val(),parseInt($("#structure-orientation-input").val()),e,n,o),generateRotatedCoordinates(parseInt($("#structure-orientation-input").val())),setupSigns(parseInt($("#structure-orientation-input").val()),e,n,o),getCoordTags(),insertCoordTags(),setupPrevCoords(),createScoreObjAddCmds(),generateOutputCommand()}function createScoreObjAddCmds(){scoreboardObjInUse[0]&&allInitCommands.splice(0,0,{cmd:"scoreboard objectives add "+inputScoreboard+"_I dummy",tag:"none"}),scoreboardObjInUse[1]&&allInitCommands.splice(0,0,{cmd:"scoreboard objectives add "+inputScoreboard+"_N dummy",tag:"none"}),scoreboardObjInUse[2]&&allInitCommands.splice(0,0,{cmd:"scoreboard objectives add "+inputScoreboard+"_A dummy",tag:"none"},{cmd:"summon armor_stand ~"+allCommands[0].posX+" ~"+allCommands[0].posY+" ~"+allCommands[0].posZ+" {CustomName:TogAct,Marker:1,NoGravity:1,Invisible:1}",tag:"none"})}function getCoordTags(){for(coordTags=[],i=0;i<allCommands.length;i++)"tagged"==allCommands[i].tag&&(coordTags[coordTags.length]={identifier:allCommands[i].tagid,loc:[allCommands[i].posX,allCommands[i].posY,allCommands[i].posZ]})}function insertCoordTags(){for(i=0;i<allCommands.length;i++)if(allCommands[i].cmd.indexOf("@TAG-")>=0)for(c=0;c<coordTags.length;c++)allCommands[i].cmd=allCommands[i].cmd.replace("@TAG-"+coordTags[c].identifier,"~"+(coordTags[c].loc[0]-allCommands[i].posX)+" ~"+(coordTags[c].loc[1]-allCommands[i].posY)+" ~"+(coordTags[c].loc[2]-allCommands[i].posZ))}function getBoxDimensionInputs(){inputOffsetX=parseInt($("#option-box-offset-x").val()),inputOffsetY=parseInt($("#option-box-offset-y").val()),inputOffsetZ=parseInt($("#option-box-offset-z").val()),inputLimitX=boxLengthX,inputLimitZ=boxLengthZ}function ifSignsEnabled(){return $(".sign-item").each(function(){return!0}),!1}function addSign(){var e="";for(e+="<div class='sign-item'><div class='sign-reorder'><i class='fa fa-caret-up sign-reorder-up'></i><i class='fa fa-caret-down sign-reorder-down'></i></div><input type='text' placeholder='Click Command 1' class='sign-input-cmd'><input type='text' placeholder='Click Command 2' class='sign-input-cmd'><input type='text' placeholder='Click Command 3' class='sign-input-cmd'><input type='text' placeholder='Click Command 4' class='sign-input-cmd sign-input-cmd-destroy'><br>",i=0;i<4;i++)e=e+"<input type='text' placeholder='Line "+(i+1)+"' class='sign-input-line'><select class='sign-input-color'><option value='black'>Black</option><option value='dark_blue'>Dark Blue</option><option value='dark_green'>Dark Green</option><option value='dark_aqua'>Dark Aqua</option><option value='dark_red'>Dark Red</option><option value='dark_purple'>Dark Purple</option><option value='gold'>Gold</option><option value='gray'>Gray</option><option value='dark_gray'>Dark Gray</option><option value='blue'>Blue</option><option value='green'>Green</option><option value='aqua'>Aqua</option><option value='red'>Red</option><option value='light_purple'>Light Purple</option><option value='yellow'>Yellow</option><option value='white'>White</option></select> <input type='checkbox' class='sign-input-style-italics'>Italics <input type='checkbox' class='sign-input-style-bold'>Bold <input type='checkbox' class='sign-input-style-underline'>Underline<br>";e+="<input type='checkbox' class='sign-input-activatetoggle'><span class='sign-label-activatetoggle'>Activate/Deactivate Machine </span> <input type='checkbox' class='sign-input-destroy'><span class='sign-label-destroy'>Destroy Machine</span> <span class='remove-sign'>Remove Sign</span></div>",$("#sign-container").append(e)}function setupSigns(e,n,o,a){var t=[],s=0;$(".sign-item").each(function(e,n){t[t.length]=[],$(n).children(".sign-input-line").each(function(e,n){t[t.length-1][t[t.length-1].length]={lineText:$(n).val()}}),s=0,$(n).children(".sign-input-color").each(function(e,n){t[t.length-1][s].lineColor=$(n).val(),s+=1}),s=0,$(n).children(".sign-input-style-italics").each(function(e,n){t[t.length-1][s].lineItalic=$(n).is(":checked"),s+=1}),s=0,$(n).children(".sign-input-style-bold").each(function(e,n){t[t.length-1][s].lineBold=$(n).is(":checked"),s+=1}),s=0,$(n).children(".sign-input-style-underline").each(function(e,n){t[t.length-1][s].lineUnderlined=$(n).is(":checked"),s+=1}),s=0,$(n).children(".sign-input-cmd").each(function(e,n){t[t.length-1][s].lineCommand=$(n).val().replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/"/g,'\\"'),s+=1});var o=$(n).children(".sign-input-destroy").is(":checked"),a=$(n).children(".sign-input-activatetoggle").is(":checked");if(o&&(t[t.length-1][3].lineCommand="DESTROYMACHINE"),a)for(l=0;l<4;l++)t[t.length-1][l].lineCommand="TOGGLEACTIVE"});var m="",r=0,c="";for(i=0;i<t.length;i++){m="",r=Math.ceil((getHighestY()-o)/2)-Math.floor(t.length/2)+i-1+o;var d={},p=4;for(d.xPos=1,d.zPos=0,d.xPos+=n,d.zPos+=a,2==e?(d.xPos*=-1,d.zPos*=-1,p=5):3==e?(d.zPos=[d.xPos,d.xPos=d.zPos][0],d.xPos*=-1,p=2):4==e&&(d.zPos=[d.xPos,d.xPos=d.zPos][0],d.zPos*=-1,p=3),b=0;b<t[i].length;b++)t[i][b].lineText.length>=1||useServerSigns&&0===t[i][b].lineCommand.length?(c=t[i][b].lineCommand.length>=1?formatForClickevent(m,t,d,r):"",m=m+",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"'+t[i][b].lineText+'\\\\\\"',"black"!==t[i][b].lineColor&&(m+=',\\\\\\"color\\\\\\":\\\\\\"'+t[i][b].lineColor+'\\\\\\"'),m+=c,1==t[i][b].lineItalic&&(m+=',\\\\\\"italic\\\\\\":true'),1==t[i][b].lineBold&&(m+=',\\\\\\"bold\\\\\\":true'),1==t[i][b].lineUnderlined&&(m+=',\\\\\\"underlined\\\\\\":true'),m+='}"'):t[i][b].lineCommand.length>=1&&(m+=formatForClickevent(m,t,d,r));m=m.replace(",",""),allInitCommands.splice(0,0,{cmd:"setblock ~"+d.xPos+" ~"+r+" ~"+d.zPos+" wall_sign "+p+" 0 {"+m+"}",tag:"sign"})}}function formatForClickevent(e,n,o,a){var t=parseInt($("#structure-orientation-input").val()),s=[getLowestX()-2-o.xPos,getLowestY()-1-a,getLowestZ()-1-o.zPos,getHighestX()+1-o.xPos,getHighestY()+1-a,getHighestZ()+1-o.zPos];3==t&&s[2]--;var l=$("#option-advanced-objectivename").val()+"_A";if(n[i][b].lineText.length>=1)if("TOGGLEACTIVE"==n[i][b].lineCommand){if(scoreboardObjInUse[2]=!0,0==b)var m=',\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("scoreboard players add @e[type=armor_stand,name=TogAct,c=1] "+l+" 1")+'\\\\\\"}';else if(1==b)var m=',\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("execute @e[score_"+l+"_min=1,score_"+l+"=1] ~ ~ ~ blockdata ~ ~ ~ {auto:0}")+'\\\\\\"}';else if(2==b)var m=',\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("execute @e[score_"+l+"_min=2] ~ ~ ~ blockdata ~ ~ ~ {auto:1}")+'\\\\\\"}';else if(3==b)var m=',\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("scoreboard players reset @e[score_"+l+"_min=2] "+l)+'\\\\\\"}'}else var m=',\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+n[i][b].lineCommand.replace("DESTROYMACHINE","fill ~"+s[0]+" ~"+s[1]+" ~"+s[2]+" ~"+s[3]+" ~"+s[4]+" ~"+s[5]+" air")+'\\\\\\"}';else if("TOGGLEACTIVE"==n[i][b].lineCommand){if(scoreboardObjInUse[2]=!0,0==b)var m=",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"\\\\\\",\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("scoreboard players add @e[type=armor_stand,name=TogAct,c=1] "+l+" 1")+'\\\\\\"}}"';else if(1==b)var m=",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"\\\\\\",\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("execute @e[score_"+l+"_min=1,score_"+l+"=1] ~ ~ ~ blockdata ~ ~ ~ {auto:0}")+'\\\\\\"}}"';else if(2==b)var m=",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"\\\\\\",\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("execute @e[score_"+l+"_min=2] ~ ~ ~ blockdata ~ ~ ~ {auto:1}")+'\\\\\\"}}"';else if(3==b)var m=",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"\\\\\\",\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+("scoreboard players reset @e[score_"+l+"_min=2] "+l)+'\\\\\\"}}"'}else var m=",Text"+(b+1)+':"{\\\\\\"text\\\\\\":\\\\\\"\\\\\\",\\\\\\"clickEvent\\\\\\":{\\\\\\"action\\\\\\":\\\\\\"run_command\\\\\\",\\\\\\"value\\\\\\":\\\\\\"'+n[i][b].lineCommand.replace("DESTROYMACHINE","fill ~"+s[0]+" ~"+s[1]+" ~"+s[2]+" ~"+s[3]+" ~"+s[4]+" ~"+s[5]+" air")+'\\\\\\"}}"';return m}function getHighestY(){var e=-999;for(g=0;g<allCommands.length;g++)allCommands[g].posY>e&&(e=allCommands[g].posY);return e}function getLowestY(){var e=999;for(g=0;g<allCommands.length;g++)allCommands[g].posY<e&&(e=allCommands[g].posY);return e}function getHighestX(){var e=-999;for(g=0;g<allCommands.length;g++)allCommands[g].posX>e&&(e=allCommands[g].posX);return e}function getLowestX(){var e=999;for(g=0;g<allCommands.length;g++)allCommands[g].posX<e&&(e=allCommands[g].posX);return e}function getHighestZ(){var e=-999;for(g=0;g<allCommands.length;g++)allCommands[g].posZ>e&&(e=allCommands[g].posZ);return e}function getLowestZ(){var e=999;for(g=0;g<allCommands.length;g++)allCommands[g].posZ<e&&(e=allCommands[g].posZ);return e}function getDelimiter(e){return $("#import-mcedit").is(":checked")?e.indexOf("_*&amp;*_")>=0?"_*&amp;*_":"_*&*_":"\n"}function splitCommands(e){var n=e.split(getDelimiter(e));return n}function setupPrevCoords(){for(i=0;i<allCommands.length;i++)allCommands[i].cmd.indexOf("@prev@")>=0&&(allCommands[i].cmd=allCommands[i].cmd.replace(/@prev@/g,"~"+(allCommands[i-1].posX-allCommands[i].posX)+" ~"+(allCommands[i-1].posY-allCommands[i].posY)+" ~"+(allCommands[i-1].posZ-allCommands[i].posZ)))}function removeBlankCommands(){for(i=0;i<allCommands.length;i++)allCommands[i].cmd.length<=0&&allCommands.splice(i,1)}function fetchCommands(){allCommands=[],allInitCommands=[],inputScoreboard=$("#option-advanced-objectivename").val();var e=splitCommands($("#input-commands").val());floorCraftingCount=0;$("#option-compressor").is(":checked")?compress=!0:compress=!1;var n=!0,o=0,a="";for(compress&&(e=compressor(e)),i=0;i<e.length;i++)if("/*"==e[i].substring(0,2))for(a=e[i].substring(2,e[i].length),e.splice(i,1),o=i-1;1==n;)o++,void 0==e[o]?n=!1:e[o].substring(0,2).indexOf("#")>=0||e[o].length<=0||" "==e[o]||("*/"==e[o]?(n=!1,e.splice(o,1)):e[o]=a+e[o]);for(i=0;i<e.length;i++)if("INIT:"==e[i].substring(0,5))allInitCommands[allInitCommands.length]={cmd:e[i].substring(5,e[i].length),tag:"init"};else if(e[i].substring(0,11).indexOf("IF:")>=0)allCommands[allCommands.length]={cmd:e[i].replace("IF:",""),tag:"if"};else if(e[i].substring(0,11).indexOf("DO:")>=0)allCommands[allCommands.length]={cmd:e[i].replace("DO:",""),tag:"do"};else if(e[i].substring(0,13).indexOf("COND:")>=0)allCommands[allCommands.length]={cmd:e[i].replace("COND:",""),tag:"do"};else if(e[i].indexOf("@prev@")>=0)allCommands[allCommands.length]={cmd:e[i],tag:"prev"};else if(e[i].substring(0,12).indexOf("TAG#")>=0)allCommands[allCommands.length]={cmd:e[i].substring(e[i].indexOf(":")+1,e[i].length),tag:"tagged",tagid:e[i].substring(4,e[i].indexOf(":"))};else if(e[i].substring(0,2).indexOf("#")>=0||e[i].length<=0||" "==e[i]);else if(e[i].substring(0,15).indexOf("FloorCrafting:")>=0){for(floorCraftingReturn=generateFloorCrafting(e[i]),r=0;r<floorCraftingReturn.reg.length;r++)allCommands[allCommands.length]=floorCraftingReturn.reg[r];for(r=0;r<floorCraftingReturn.init.length;r++)allInitCommands[allInitCommands.length]=floorCraftingReturn.init[r]}else allCommands[allCommands.length]={cmd:e[i],tag:"none"};for(i=0;i<allCommands.length;i++)allCommands[i].cmd.substring(0,13).indexOf("NA:")>=0?(allCommands[i].auto=!1,allCommands[i].cmd=allCommands[i].cmd.replace("NA:","")):allCommands[i].auto=!0,allCommands[i].cmd.substring(0,13).indexOf("NT:")>=0?(allCommands[i].trackoutput="TrackOutput:0,",allCommands[i].cmd=allCommands[i].cmd.replace("NT:","")):allCommands[i].trackoutput="",allCommands[i].inputcmdblock="default",allCommands[i].cmd.substring(0,13).indexOf("I:")>=0&&(allCommands[i].inputcmdblock="impulse",allCommands[i].cmd=allCommands[i].cmd.replace("I:","")),allCommands[i].cmd.substring(0,13).indexOf("R:")>=0&&(allCommands[i].inputcmdblock="repeating",allCommands[i].cmd=allCommands[i].cmd.replace("R:",""));for(allInitCommands.reverse(),i=0;i<allCommands.length;i++)nbtInSelectors(allCommands[i].cmd);useHopperClock&&allCommands.splice(0,0,{cmd:"HOPPER1Placeholder"},{cmd:"HOPPER2Placeholder"},{cmd:"HOPPER3Placeholder"})}function makeRandomStr(e){for(var n="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)n+=o.charAt(Math.floor(Math.random()*o.length));return n}function generateFloorCrafting(e){var n=[];e+="  ";var o=floorCraftingCurIndex,a=[],t=[],i=[],s=0;for(f=0;f<e.length-1;f++)0==checkBrackets(e.substring(0,f+1))&&" "==e.substring(f,f+1)&&(i.push(e.substring(s,f)),s=f+1);i.splice(0,1),scoreboardObjInUse[0]=!0,floorCraftingScoreboard=inputScoreboard+"_I";var l=!1;for(f=0;f<i.length;f+=3)l=!1,"RES:"==i[f].substring(0,4)&&(l=!0),n.push({item:i[f].replace("RES:",""),damage:i[f+1],nbt:i[f+2],isresult:l});var m="",r="",c="",d="";for(f=0;f<n.length;f++)n[f].isresult||(m="",r="","0"!==n[f].damage&&(m=",Damage:"+n[f].damage+"s"),"{}"!==n[f].nbt&&(r=",tag:"+n[f].nbt),a[a.length]={cmd:"scoreboard players set @e "+floorCraftingScoreboard+" "+floorCraftingCurIndex+" {item:{id:minecraft:"+n[f].item+m+r+"},OnGround:1b}",tag:"none"},c=c+"execute @e[score_"+floorCraftingScoreboard+"_min="+floorCraftingCurIndex+",score_"+floorCraftingScoreboard+"="+floorCraftingCurIndex+d+"] ~ ~ ~ ",d=",r=1",floorCraftingCurIndex++);for(f=0;f<n.length;f++)n[f].isresult&&(m="",r="","0"!==n[f].damage&&(m=",Damage:"+n[f].damage),"{}"!==n[f].nbt&&(r=",tag:"+n[f].nbt),a[a.length]={cmd:c+"summon item ~ ~0.5 ~ {item:{id:minecraft:"+n[f].item+m+r+",Count:1}}",tag:"none"},a[a.length]={cmd:c+"kill @e[type=item,r=3,score_"+floorCraftingScoreboard+"_min="+o+",score_"+floorCraftingScoreboard+"="+floorCraftingCurIndex+"]",tag:"none"});return floorCraftingCount+=1,{reg:a,init:t}}function formatEscaping(){for(i=0;i<allCommands.length;i++)allCommands[i].cmd=allCommands[i].cmd.replace(/\\/g,"\\\\"),allCommands[i].cmd=allCommands[i].cmd.replace(/"/g,'\\"'),allCommands[i].cmd=allCommands[i].cmd.replace(/\\/g,"\\\\"),allCommands[i].cmd=allCommands[i].cmd.replace(/"/g,'\\"');for(i=0;i<allInitCommands.length;i++)allInitCommands[i].cmd=allInitCommands[i].cmd.replace(/\\/g,"\\\\"),allInitCommands[i].cmd=allInitCommands[i].cmd.replace(/"/g,'\\"')}function calculateBoxEdge(e,n){var o=0;return predictAmountOfCmds=allCommands.length,"length"==e?(o=boxLengthX,predictAmountOfCmds<o&&(o=predictAmountOfCmds),"min"==n?2:2+o):"width"==e?(o=boxLengthZ,predictAmountOfCmds/boxLengthX<o&&(o=Math.ceil(predictAmountOfCmds/boxLengthX)),"min"==n?(o%2==0&&(o-=1),-Math.floor(o/2)):Math.floor(o/2)):"height"==e?(o=999,(predictAmountOfCmds-1)/boxLengthX<o&&(o=Math.floor((predictAmountOfCmds-1)/boxLengthX/boxLengthZ)),"min"==n?-2:o-2):void 0}function addDataIfNone(e){return e.indexOf(" ")<=-1?e+" 0":e}function rotateCaseNegate(e){"x"==e?(caseSides.min[0]*=-1,caseSides.max[0]*=-1,caseCaps.min[0]*=-1,caseCaps.max[0]*=-1):(caseSides.min[2]*=-1,caseSides.max[2]*=-1,caseCaps.min[2]*=-1,caseCaps.max[2]*=-1)}function rotateCaseSwap(){tempCaseCoords.tempCaseSides=[caseSides.min[0],caseSides.min[1],caseSides.min[2],caseSides.max[0],caseSides.max[1],caseSides.max[2]],tempCaseCoords.tempCaseCaps=[caseCaps.min[0],caseCaps.min[1],caseCaps.min[2],caseCaps.max[0],caseCaps.max[1],caseCaps.max[2]],caseSides.min[0]=tempCaseCoords.tempCaseSides[2],caseSides.min[2]=tempCaseCoords.tempCaseSides[0],caseSides.max[0]=tempCaseCoords.tempCaseSides[5],caseSides.max[2]=tempCaseCoords.tempCaseSides[3],caseCaps.min[0]=tempCaseCoords.tempCaseCaps[2],caseCaps.min[2]=tempCaseCoords.tempCaseCaps[0],caseCaps.max[0]=tempCaseCoords.tempCaseCaps[5],caseCaps.max[2]=tempCaseCoords.tempCaseCaps[3]}function generateCasing(e,n,o,a,t,i){0!=$("#option-box-encase").is(":checked")&&(caseSides={min:[calculateBoxEdge("length","min")+a,calculateBoxEdge("height","min")+t,calculateBoxEdge("width","min")-1+i],max:[calculateBoxEdge("length","max")+1+a,calculateBoxEdge("height","max")+t,calculateBoxEdge("width","max")+1+i]},caseCaps={min:[calculateBoxEdge("length","min")+a,calculateBoxEdge("height","min")-1+t,calculateBoxEdge("width","min")-1+i],max:[calculateBoxEdge("length","max")+1+a,calculateBoxEdge("height","max")+1+t,calculateBoxEdge("width","max")+1+i]},tempCaseCoords={},2==o?(rotateCaseNegate("x"),rotateCaseNegate("z")):3==o?(rotateCaseSwap(),rotateCaseNegate("x")):4==o&&(rotateCaseSwap(),rotateCaseNegate("z")),allInitCommands[allInitCommands.length]={cmd:"fill ~"+caseSides.min[0]+" ~"+caseSides.min[1]+" ~"+caseSides.min[2]+" ~"+caseSides.max[0]+" ~"+caseSides.max[1]+" ~"+caseSides.max[2]+" "+addDataIfNone(e)+" 0 "+n.split(" ")[0],tag:"init"},allInitCommands[allInitCommands.length]={cmd:"fill ~"+caseCaps.min[0]+" ~"+caseCaps.min[1]+" ~"+caseCaps.min[2]+" ~"+caseCaps.max[0]+" ~"+caseCaps.max[1]+" ~"+caseCaps.max[2]+" "+addDataIfNone(n)+" hollow",tag:"init"})}function generateCoordinates(e,n){var o=!1,a=!1,t=boxLengthX;n-=1;var s=0,l=0,m=0;for(boxLengthX<4&&(boxLengthX=4),$("#output-notifications").hide();!o||a;){for(s=0,l=0,m=0,t=boxLengthX-1,i=0;i<allCommands.length;i++)"init"!==allCommands[i].tag?((!useHopperClock&&0==i||useHopperClock&&3==i)&&(allCommands[i].repeating=!0),useHopperClock&&0==i&&(allCommands[i].tag="hopper1"),useHopperClock&&1==i&&(allCommands[i].tag="hopper2"),useHopperClock&&2==i&&(allCommands[i].tag="hopper3"),allCommands[i].posX=s,allCommands[i].posY=l,allCommands[i].posZ=m,(m%2==0&&l%2==0||m%2!==0&&l%2!==0)&&(allCommands[i].direction="east",s+=1),(m%2==0&&l%2!==0||m%2!==0&&l%2==0)&&(allCommands[i].direction="west",s-=1),s<0&&(l%2==0?(allCommands[i].direction="south",m+=1):(allCommands[i].direction="north",m-=1),s=0),s>t&&(l%2==0?(allCommands[i].direction="south",m+=1):(allCommands[i].direction="north",m-=1),s-=1),m>n&&(allCommands[i].direction="up",l+=1,m-=1),m<0&&(allCommands[i].direction="up",l+=1,m=0)):(allCommands[i].posX=0,allCommands[i].posY=0,allCommands[i].posZ=0);o=!0,a=!1}a&&$("#output-notifications").show().html("The box length was automatically increased in order to keep the conditional chain intact.")}function dirToDamage(e,n){var o=0;switch(e){case"down":o=0;break;case"up":o=1;break;case"north":o=2;break;case"south":o=3;break;case"west":o=4;break;case"east":o=5}return 1==n&&(o+=8),o}function tagConditionals(){for(i=0;i<allCommands.length;i++)"do"==allCommands[i].tag&&(allCommands[i].isCond=!0)}function generateBrackets(){var e="";for(i=0;i<allCommands.length+allInitCommands.length;i++)e+="}]";return e}function optionBlockdataChange(){useBlockdata=!useBlockdata}function shortHand(e){return e.map(function(e){var n;return console.log(e),e.replace(/stone *variant=([^\s]*)/gi,function(e,o){switch(o=o.toLowerCase(),console.log(o),o){case"stone":n="stone";break;case"granite":n="stone 1";break;case"smooth_granite":case"smooth granite":case"polished granite":case"polished_granite":n="stone 2";break;case"diorite":n="stone 3";break;case"smooth_diorite":case"smooth diorite":case"polished diorite":case"polished_diorite":n="stone 4";break;case"andesite":n="stone 5";break;case"smooth_andesite":case"smooth andesite":case"polished andesite":case"polished_andesite":n="stone 6";break;case"cobblestone":n="cobblestone";break;default:n="stone"}return console.log(n),n})})}function generateOutputCommand(){var e="",n="";tagConditionals();for(var o=[],a=!0,t="",i=0;i<allCommands.length;i++)if(a=!0,"hopper1"==allCommands[i].tag?(a=!1,o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" hopper "+dirToDamage(fixDirForOrientation("east",parseInt($("#structure-orientation-input").val())),!1)+" replace {items:[{id:minecraft:stone,Count:1}]}}"):"hopper2"==allCommands[i].tag?("west"==allCommands[i].direction,a=!1,o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" hopper "+dirToDamage(fixDirForOrientation("west",parseInt($("#structure-orientation-input").val())),!1)+"}"):"hopper3"==allCommands[i].tag?("east"==allCommands[i].direction,a=!1,o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" unpowered_comparator "+dirToDamageComparator(fixDirForOrientation("east",parseInt($("#structure-orientation-input").val())))+"}"):(n=1==allCommands[i].repeating?useHopperClock?"":"repeating_":"chain_","impulse"==allCommands[i].inputcmdblock&&(n=""),"repeating"==allCommands[i].inputcmdblock&&(n="repeating_")),t="",useHopperClock?t=3==i?"":"auto:1,":1==allCommands[i].auto&&allCommands[i].cmd.length>0&&(t="auto:1,"),a)if(allCommands[i].cmd.length>0){var s="";allCommands[i].cmd.indexOf('"')>-1&&(s='"'),useBlockdata?o[o.length]=",{id:commandblock_minecart,Command:blockdata ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" {"+t+allCommands[i].trackoutput+"Command:"+s+allCommands[i].cmd+s+"}}":o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" "+n+"command_block "+dirToDamage(allCommands[i].direction,allCommands[i].isCond)+" 0 {"+t+allCommands[i].trackoutput+"Command:"+s+allCommands[i].cmd+s+"}}"}else useBlockdata||(o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" "+n+"command_block "+dirToDamage(allCommands[i].direction,allCommands[i].isCond)+"}");if(useBlockdata){for(var l={x:9999,y:9999,z:9999},m={x:-9999,y:-9999,z:-9999},i=0;i<allCommands.length;i++)allCommands[i].posX<l.x&&(l.x=allCommands[i].posX),allCommands[i].posY<l.y&&(l.y=allCommands[i].posY),allCommands[i].posZ<l.z&&(l.z=allCommands[i].posZ),allCommands[i].posX>m.x&&(m.x=allCommands[i].posX),allCommands[i].posY>m.y&&(m.y=allCommands[i].posY),allCommands[i].posZ>m.z&&(m.z=allCommands[i].posZ);for(var r=dirToDamage(allCommands[0].direction,!1),i=0;i<allCommands.length;i++)if(allCommands[i].direction!==allCommands[0].direction||allCommands[i].repeating===!0||"impulse"===allCommands[i].inputcmdblock||"repeating"===allCommands[i].inputcmdblock||allCommands[i].isCond===!0){var n="";if(n=1==allCommands[i].repeating?useHopperClock?"":"repeating_":"chain_","impulse"==allCommands[i].inputcmdblock&&(n=""),"repeating"==allCommands[i].inputcmdblock&&(n="repeating_"),void 0!==allCommands[i+1]&&allCommands[i].direction===allCommands[i+1].direction&&allCommands[i].isCond===allCommands[i+1].isCond&&allCommands[i].inputcmdblock===allCommands[i+1].inputcmdblock&&allCommands[i].repeating===allCommands[i+1].repeating){for(var c=1;void 0!==allCommands[i+c]&&allCommands[i].direction===allCommands[i+c].direction&&allCommands[i].isCond===allCommands[i+c].isCond&&allCommands[i].inputcmdblock===allCommands[i+c].inputcmdblock&&allCommands[i].repeating===allCommands[i+c].repeating;)c++;c--,o[o.length]=",{id:commandblock_minecart,Command:fill ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" ~"+allCommands[i+c].posX+" ~"+allCommands[i+c].posY+" ~"+allCommands[i+c].posZ+" "+n+"command_block "+dirToDamage(allCommands[i].direction,allCommands[i].isCond)+"}",i+=c}else o[o.length]=",{id:commandblock_minecart,Command:setblock ~"+allCommands[i].posX+" ~"+allCommands[i].posY+" ~"+allCommands[i].posZ+" "+n+"command_block "+dirToDamage(allCommands[i].direction,allCommands[i].isCond)+"}"}o[o.length]=",{id:commandblock_minecart,Command:fill ~"+l.x+" ~"+l.y+" ~"+l.z+" ~"+m.x+" ~"+m.y+" ~"+m.z+" chain_command_block "+r+"}"}for(i=0;i<allInitCommands.length;i++)"sign"==allInitCommands[i].tag||allInitCommands[i].cmd.indexOf('"')===-1&&allInitCommands[i].cmd.indexOf("'")===-1?o[o.length]=",{id:commandblock_minecart,Command:"+allInitCommands[i].cmd+"}":o[o.length]=',{id:commandblock_minecart,Command:"'+allInitCommands[i].cmd+'"}';var d="none",p=0,g=0;for(i=0;i<allCommands.length;i++){if("do"==allCommands[i].tag&&(allCommands[i].posY!==p||allCommands[i].posZ!==g))return $("#option-box-length-x").val(parseInt($("#option-box-length-x").val())+2),generateCompactCommand(),void $("#output-notifications").show().html("The box length was automatically increased in order to keep the conditional chain intact.");d=allCommands[i].tag,p=allCommands[i].posY,g=allCommands[i].posZ}o=o.reverse(),outputCommands=[];var u="summon falling_block ~ ~1 ~ {Block:stone,Time:1,Passengers:[{id:falling_block,Block:redstone_block,Time:1,Passengers:[{id:falling_block,Block:activator_rail,Time:1,Passengers:[{id:commandblock_minecart,Command:gamerule commandBlockOutput false}&&INITCMDSTRING&&,{id:commandblock_minecart,Command:setblock ~ ~ ~1 command_block 0 0 {Command:fill ~ ~-3 ~-1 ~ ~ ~ air}},{id:commandblock_minecart,Command:setblock ~ ~-1 ~1 redstone_block},{id:commandblock_minecart,Command:kill @e[type=commandblock_minecart,r=1]}]}]}]}";for(i=0;i<o.length;i++)e.length+o[i].length+492+89>32500&&(e+=",{id:commandblock_minecart,Command:summon falling_block ~ ~2 ~ {Block:command_block,Time:1}}",outputCommands[outputCommands.length]=u.replace("&&INITCMDSTRING&&",e),e=""),e+=o[i];e.length>0&&(outputCommands[outputCommands.length]=u.replace("&&INITCMDSTRING&&",e)),displayOutputError(!1),$("#output-container").empty();for(var i=0;i<outputCommands.length;i++)outputCommands[i]=outputCommands[i].replace(/~0 /g,"~ "),$("#output-container").append("<textarea cols='50' rows='1' readonly class='output-command' onclick='this.focus();this.select()'></textarea><div class='output-stats'></div>"),$(".output-command").last().val(outputCommands[i]).css("display","inline-block"),$(".output-stats").last().html("Command Length: "+outputCommands[i].length).slideDown(150),outputCommands[i].length>32500&&displayOutputError("The character limit for command blocks was lowered to 32,500 in the 1.9 snapshots! This command is "+(outputCommands[i].length-32500)+" characters over that limit!"),0!==checkBrackets(outputCommands[i])&&(checkBrackets(outputCommands[i])>0?highlightUnbalancedCmd("opening",outputCommands[i]):highlightUnbalancedCmd("closing",outputCommands[i]));
}function displayOutputError(e){if(0==e)return void $("#output-errors").hide();$("#output-errors").empty();var n="";$("#output-errors").val().length>0&&(n="<br>"),$("#output-errors").append(e+n).slideDown(200)}function highlightUnbalancedCmd(e,n){if(displayBracketBalanceErrors){var o=$("#input-commands").val(),a=!1;for(inputCommandsArray=o.split(getDelimiter()),j=inputCommandsArray.length-1;j>=0;j--)if(inputCommandsArray[j].substring(0,2).indexOf("#")<0&&inputCommandsArray[j].length>0){var t=document.getElementById("input-commands");"opening"==e&&checkBrackets(inputCommandsArray[j])>0&&(selectTextareaLine(t,j+1),a=!0),"closing"==e&&checkBrackets(inputCommandsArray[j])<0&&(selectTextareaLine(t,j+1),a=!0)}a&&0!==checkBrackets(n)&&(displayOutputError(checkBrackets(n)>0?"There are "+checkBrackets(n)+' too many opening curly brackets in the final command! The command causing the error has been highlighted. <div id="ignore-unbalanced">Ignore from now on</div>':"There are "+Math.abs(checkBrackets(n))+' too many closing curly brackets in the final command! The command causing the error has been highlighted. <div id="ignore-unbalanced">Ignore from now on</div>'),$("#ignore-unbalanced").click(function(){displayBracketBalanceErrors=!1,$("#output-errors").slideUp().empty(),$("#output-notifications").slideDown().html('The "unbalanced brackets" error will be ignored from now on.'),setTimeout(function(){$("#output-notifications").fadeOut()},3e3)}))}}function selectTextareaLine(e,n){n--;for(var o=e.value.split(getDelimiter()),a=0,t=e.value.length,i=0;i<o.length&&i!=n;i++)a+=o[i].length+1;var t=o[n].length+a;if("undefined"!=typeof e.selectionStart)return e.focus(),e.selectionStart=a,e.selectionEnd=t,!0;if(document.selection&&document.selection.createRange){e.focus(),e.select();var s=document.selection.createRange();return s.collapse(!0),s.moveEnd("character",t),s.moveStart("character",a),s.select(),!0}return!1}function checkBrackets(e){return e.split("{").length-1-(e.split("}").length-1)}function getBoxSize(e){var n=-999,o=999;for(i=0;i<allCommands.length;i++)"length"==e?(allCommands[i].posX>n&&(n=allCommands[i].posX),allCommands[i].posX<o&&(o=allCommands[i].posX)):"width"==e&&(allCommands[i].posZ>n&&(n=allCommands[i].posZ),allCommands[i].posZ<o&&(o=allCommands[i].posZ));return n-o}function offsetCoordinates(e,n,o,a){for(e+=3,n-=2,o=-Math.floor(getBoxSize("width")/2)+o,i=0;i<allCommands.length;i++)allCommands[i].posX+=e,allCommands[i].posY+=n,allCommands[i].posZ+=o}function rotateDirectionCommandBlocks(e){for(var n=0;e>0;){for(i=0;i<allCommands.length;i++){switch(allCommands[i].direction){case"north":n="east";break;case"east":n="south";break;case"south":n="west";break;case"west":n="north";break;default:n=allCommands[i].direction}allCommands[i].direction=n}e-=1}}function rotateDirection(e,n){for(var o=e;n>0;){switch(o){case"north":o="east";break;case"east":o="south";break;case"south":o="west";break;case"west":o="north"}n-=1}return o}function fixDirForOrientation(e,n){return 1==n?e:2==n?rotateDirection(e,2):3==n?rotateDirection(e,1):4==n?rotateDirection(e,3):void 0}function dirToDamageComparator(e){switch(e){case"north":return 0;case"east":return 1;case"south":return 2;case"west":return 3}}function rotateSegSwap(){var e=[];for(i=0;i<allCommands.length;i++)e[i]={cmd:allCommands[i].cmd,oldPosX:allCommands[i].posX,oldPosZ:allCommands[i].posZ};for(i=0;i<e.length;i++)allCommands[i].posX=e[i].oldPosZ,allCommands[i].posZ=e[i].oldPosX}function rotateSegNegate(e){if("x"==e)for(i=0;i<allCommands.length;i++)allCommands[i].posX*=-1;else for(i=0;i<allCommands.length;i++)allCommands[i].posZ*=-1}function generateRotatedCoordinates(e){2==e?(rotateSegNegate("x"),rotateSegNegate("z"),rotateDirectionCommandBlocks(2)):3==e?(rotateSegSwap(),rotateDirectionCommandBlocks(1),rotateSegNegate("x")):4==e&&(rotateSegSwap(),rotateSegNegate("z"),rotateDirectionCommandBlocks(3))}function download(e,n){var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}$("#input-commands").change(function(){isDirty=!0});var isDirty=!1;useHopperClock=!1,useServerSigns=!0;var nbtSelectorCur=1,scoreboardObjInUse=[!1,!1,!1],nbtScoreArr=[];$("#manual-projects-button").click(function(){$("#export-textarea").val(generateExportString()),$("#export-container").fadeIn(200)}),$("#manual-projects-import").click(function(){$("#import-container").fadeIn(200)}),$(".page-fade").click(function(){$(this).parent().fadeOut(350)}),$(".exit").click(function(){$(this).parent().parent().parent().fadeOut(350)});var helpSelected="none";$("#help-show-functions").click(function(){"functions"!==helpSelected?($(".help-container").slideUp(),$("#help-built-in-functions").slideDown(),helpSelected="functions"):($(".help-container").slideUp(),helpSelected="none")}),$("#help-show-how-to").click(function(){"howto"!==helpSelected?($(".help-container").slideUp(),$("#help-how-to").slideDown(),helpSelected="howto"):($(".help-container").slideUp(),helpSelected="none")}),$("#help-show-others").click(function(){"others"!==helpSelected?($(".help-container").slideUp(),$("#help-others").slideDown(),helpSelected="others"):($(".help-container").slideUp(),helpSelected="none")}),$(document).ready(function(){$("#option-box-encase-block-window").val("stained_glass "+Math.round(15*Math.random())),$("#option-box-encase-block-caps").val("stained_hardened_clay "+Math.round(15*Math.random())),$("#option-advanced-objectivename").val(makeRandomStr(6))}),$("#generate").click(function(){generateCompactCommand()});var globalBoxLength=0;allCommands=[],$("#add-sign").click(function(){addSign()}),$(document).on("click",".remove-sign",function(){$(this).parent().remove()}),$(document).on("click",".sign-reorder-up",function(){var e=$(this).parent().parent();e.prev().before(e)}),$(document).on("click",".sign-reorder-down",function(){var e=$(this).parent().parent();e.next().after(e)}),$(document).on("change",".sign-input-destroy",function(){$(this).is(":checked")?($(this).siblings(".sign-input-cmd-destroy").css("display","none"),$(this).siblings(".sign-input-activatetoggle").attr("disabled",!0),$(this).siblings(".sign-label-activatetoggle").css("opacity",".50")):($(this).siblings(".sign-input-cmd-destroy").css("display","inline"),$(this).siblings(".sign-input-activatetoggle").removeAttr("disabled"),$(this).siblings(".sign-label-activatetoggle").css("opacity","1"))}),$(document).on("change",".sign-input-activatetoggle",function(){$(this).is(":checked")?($(this).siblings(".sign-input-cmd").css("display","none"),$(this).siblings(".sign-input-destroy").attr("disabled",!0),$(this).siblings(".sign-label-destroy").css("opacity",".50")):($(this).siblings(".sign-input-cmd").css("display","inline"),$(this).siblings(".sign-input-destroy").removeAttr("disabled"),$(this).siblings(".sign-label-destroy").css("opacity","1"))}),floorCraftingCount=0,floorCraftingCurIndex=1,caseSides={},caseCaps={},tempCaseCoords={};var useBlockdata=!0;displayBracketBalanceErrors=!0,$("#upload-textfile").click(function(){document.getElementById("upload-hidden-button").click()}),document.getElementById("upload-hidden-button").onchange=function(){var e=document.getElementById("upload-hidden-button").files[0];if(e){var n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){importWithResultMessage(e.target.result)},n.onerror=function(e){$("#project-error").html("The project file that was uploaded is not valid!")}}},$("#export-download").click(function(){download("cmdcombiner-project.txt",$("#export-textarea").val())}),$("#button-save-simple").click(function(){saveProjectSimple()}),$("#sign-collapse").click(function(){$("#sign-wrapper").slideToggle(),$("#sign-collapse").toggleClass("sign-collapse-rotate")});